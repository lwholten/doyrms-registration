<!DOCTYPE html>
<head>
<!-- jQuery UI -->
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<!-- Load icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- dynamic  background -->
<script type="text/javascript" src="../../scripts/jquery/dynamic_background.js"></script>

<!-- staff page javascript functions -->
<script src="../../scripts/staff_page_functions.js"></script>

<meta charset="UTF-8" lang="en">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Home | DOYRMS Registration</title>
</head>

<body>
  <header class="text" id="main_header">
    <img src="../../images/png/logo.png"></img>
    <h1>DOYRMS Registration</h1>
    <navbar>
      <form method="post">
        <button type="submit" class="navbar_button blue_button" id="sign_out_button" name="staff_sign_out"><span class="left_arrow"></span><spacer></spacer><h5>LOG OUT</h5></button>
      </form>
      <span class="divider"></span>
      <div class="search_bar_wrapper">
        <input id="ita" type="search" name="search" placeholder="Search..."></input>
        <button type="submit">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </navbar>
  </header>
  <div class="wrapper">
    <div class="text" id="sidebar">
      <container id="sidebar_contents_container">
        <input type="checkbox" id="sidebar_toggle" class="hidden"/>
        <label for="sidebar_toggle" onclick="toggleSidebar()"><span class="left_arrow"></span></label>
        <ul id="sidebar_contents">
          <li class="sidebar_subtitle"><h2>Menu</h2></li>
          <li class="sidebar_subtitle"><h3>Information</h3></li>
          <li onclick="toggleMainSection(this.id,'home_section')" class="sidebar_button sidebar_button_active" id="home_button"><h4>Home</h4></li>
          <li onclick="toggleMainSection(this.id,'activity_section')" class="sidebar_button" id="activity_button"><h4>Activity</h4></li>
          <li onclick="toggleMainSection(this.id,'users_section')" class="sidebar_button" id="users_button"><h4>Users</h4></li>
          <li onclick="toggleMainSection(this.id,'restricted_section')" class="sidebar_button" id="restricted_button"><h4>Restricted</h4></li>
          <li onclick="toggleMainSection(this.id,'away_section')" class="sidebar_button" id="away_button"><h4>Away</h4></li>
          <li class="sidebar_subtitle"><h3>Events</h3></li>
          <li onclick="toggleMainSection(this.id,'events_summary_section')" class="sidebar_button" id="events_summary_button"><h4>Summary</h4></li>
          <?php @include('../php/sidebar/staff/event_buttons.php'); loadSidebarEventButtons() ?>

          <li class="sidebar_subtitle"><h3>Account</h3></li>
          <li onclick="toggleMainSection(this.id,'edit_details_section')" class="sidebar_button" id="edit_details_button"><h4>Edit Details</h4></li>
          <li onclick="toggleMainSection(this.id,'customise_section')" class="sidebar_button" id="customise_button"><h4>Customise</h4></li>
        </ul>
      </container>
    </div>
    <div class="text main">
      <section class="main_section main_section_active" id="home_section">
        <h2>Welcome, <?=$_SESSION["staffUsername"]?>.</h2>
        <div class="info_wrapper text">
          <p>Welcome to DOYRMS registration, a web application programmed by Luke Holten.</p>
          <p>This is the home area. Using the control panel located here, you can carry out many operations such as searching for a specific user or signing a user in/out.</p>
        </div>
        <spacer></spacer>
        <div id="dashboard" class="text">
          <header>
            <h3>Your Dashboard</h3>
          </header>
          <div class="dashboard_body text">
            <aside class="body_section">
              <h3>Quick Access</h3>
              <divider></divider>
              <ul>
                <li><img src="../../images/svg/search.svg" alt="Search SVG"><h4>Search for a user</h4></li>
                <li><img src="../../images/svg/download.svg" alt="Download SVG"><h4>Download data</h4></li>
                <li><img src="../../images/svg/sign-in-out.svg" class="flip" alt="Download SVG"><h4>Sign user out</h4></li>
                <li><img src="../../images/svg/sign-in-out.svg" alt="Download SVG"><h4>Sign user in</h4></li>
                <li><img src="../../images/svg/padlock.svg" alt="Download SVG"><h4>Restrict user</h4></li>
                <li><img src="../../images/svg/sign-away.svg" alt="Download SVG"><h4>Mark user as away</h4></li>
              </ul>
            </aside>
            <section class="body_section">
              <h3>Analytics</h3>
              <divider></divider>
              <?php @include('../php/sections/staff/dashboard_analytics.php'); fillDashboardAnalytics() ?>
            </section>
          </div>
          <footer/>
        </div>
      </section>
      <section class="main_section" id="activity_section">
        <h2>Activity</h2>
        <div class="info_wrapper text">
          <p>Welcome to the activity area. In this area you are able to see the most recent user activity. By looking at the table below, you can see users which have recently signed in and out.</p>
          <p>Users shown in red are restricted, this means that they may only use the system for events.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h3>Recent Activity</h2>
          </header>
          <table class='table' id="recent_activity_table">
            <tr>
              <th>In/Out</th>
              <th>Time</th>
              <th>Message</th>
              <th>Event</th>
              <th>Date</th>
            </tr>
            <?php @include('../php/tables/staff/recent_activity.php'); fillRecentActivityTable() ?>
          </table>
          <footer/>
        </div>
      </section>
      <section class="main_section" id="users_section">
        <h2>Users</h2>
        <div class="info_wrapper text">
          <p>Welcome to the users area. In this area, you are able to see where users are at a glance. Need to know where someone is? You can quickly glance at the table to find out where they are.</p>
          <p>Users shown in red are restricted, this means that they may only use the system for events.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h3>User Status</h2>
          </header>
          <table class='table' id="user_status_table">
            <tr>
              <th>Status</th>
              <th>Forename</th>
              <th>Surname</th>
              <th>Current Location</th>
              <th>Time last active</th>
              <th>Date last active</th>
            </tr>
            <?php @include('../php/tables/staff/user_status.php'); fillUserStatusTable() ?>
          </table>
          <footer/>
        </div>
      </section>
      <section class="main_section" id="away_section">
        <h2>Away</h2>
        <div class="info_wrapper text">
          <p>Need to see who is currently away? This section can provide you will all the relevant information you may need.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h3>Away Users</h2>
          </header>
          <table class='table' id="away_table">
            <tr>
              <th>Forename</th>
              <th>Surname</th>
              <th>Location</th>
              <th>Date signed out</th>
              <th>Time</th>
              <th>Date expected back</th>
              <th>Time</th>
            </tr>
            <?php @include('../php/tables/staff/away_users.php'); fillAwayUsersTable() ?>
          </table>
          <footer/>
        </div>
      </section>
      <section class="main_section" id="restricted_section">
        <h2>Restricted</h2>
        <div class="info_wrapper text">
          <p>In this section, you are able to see all restricted users.</p>
          <p>Restricted users are unable to use the system unless they are signing in or out for an event. Staff are also alerted when a restricted user performs an action like an attempted sign out.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h3>Restricted Users</h2>
          </header>
          <table class='table' id="away_table">
            <tr>
              <th>Forename</th>
              <th>Surname</th>
              <th>Date Restricted</th>
              <th>Until</th>
              <th>Time Remaining</th>
              <th>Description</th>
            </tr>
            <?php @include('../php/tables/staff/restricted_users.php'); fillRestrictedUsersTable() ?>
          </table>
          <footer/>
        </div>
      </section>

      <section class="main_section" id="events_summary_section">
        <h2>Events - Summary</h2>
        <div class="info_wrapper text">
          <p>Welcome to the events summary area. In this area, you can see all active events. This includes when the event starts and ends, as well as how early or late users may be when signing out.</p>
          <spacer></spacer>
          <ul class="event_card_container">
            <?php @include('../php/sections/staff/event_cards.php'); loadEventCards() ?>
          </ul>
        </div>
        <spacer></spacer>
      </section>
      <?php @include('../php/sections/staff/event_sections.php'); loadEventSections() ?>

      <section class="main_section" id="edit_details_section">
        <h2>Account - Edit Details</h2>
        <div class="info_wrapper text">
          <p>In this section you can edit your account details. New email address? no problem, you can change it here.</p>
        </div>
      </section>
      <section class="main_section" id="customise_section">
        <h2>Account - Customise</h2>
        <div class="info_wrapper text">
          <p>In this section you can customise your site experience. Fancy trying dark mode? You can enable it here.</p>
        </div>
      </section>
    </div>
  </div>
</body>

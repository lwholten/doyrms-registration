<!DOCTYPE html>
<head>
<script src="../../scripts/staff_page_functions.js"></script>
<script src="../../scripts/admin_page_functions.js"></script>
<meta charset="UTF-8" lang="en">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin | DOYRMS Registration</title>
</head>

<body>
  <header class="text" id="main_header">
    <img src="../../images/logo.png"></img>
    <h1>DOYRMS Registration</h1>
    <navbar>
      <form method="post">
        <button type="submit" class="navbar_button blue_button" id="sign_out_button" name="admin_sign_out"><span class="left_arrow"></span><spacer></spacer><h5>LOG OUT</h5></button>
      </form>
      <span class="divider"></span>
      <button><h5>CONTACT</h5></button>
      <span class="divider"></span>
      <button><h5>HELP</h5></button>
    </navbar>
  </header>
  <div class="wrapper">
    <div class="text" id="sidebar">
      <container id="sidebar_contents_container">
        <input type="checkbox" id="sidebar_toggle" class="hidden"/>
        <label for="sidebar_toggle" onclick="toggleSidebar()"><span class="left_arrow"></span></label>
        <ul id="sidebar_contents">
          <li class="sidebar_subtitle"><h2>Menu</h2></li>
          <li class="sidebar_subtitle"><h3>Information</h3></li>
          <li onclick="toggleMainSection(this.id,'m1')" class="sidebar_button sidebar_button_active" id="s1"><h4>Home</h4></li>
          <li class="sidebar_subtitle"><h3>Manage Staff</h3></li>
          <li onclick="toggleMainSection(this.id,'m11')" class="sidebar_button" id="s11"><h4>Staff</h4></li>
          <li onclick="toggleMainSection(this.id,'m12')" class="sidebar_button" id="s12"><h4>Edit Staff</h4></li>
          <li class="sidebar_subtitle"><h3>Manage Users</h3></li>
          <li onclick="toggleMainSection(this.id,'m21')" class="sidebar_button" id="s21"><h4>Edit Users</h4></li>
          <li class="sidebar_subtitle"><h3>Manage Database</h3></li>
          <li onclick="toggleMainSection(this.id,'m31')" class="sidebar_button" id="s31"><h4>Edit Locations</h4></li>
          <li onclick="toggleMainSection(this.id,'m32')" class="sidebar_button" id="s32"><h4>Edit Events</h4></li>
        </ul>
      </container>
    </div>
    <div class="text main">
      <section class="main_section" id="m1">
        <h2>Welcome, <?=$_SESSION["staffUsername"]?>.</h2>
      </section>

      <section class="main_section" id="m11">
        <h2>Staff</h2>
        <div class="info_wrapper text">
          <p>Welcome to the staff area. In this area, you are able to see signed in staff at a glance. Need to know who is currently signed in? You can quickly glance at the table to find out.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h2>Staff Status</h2>
          </header>
          <table class='table' id="user_status_table">
            <tr>
              <th>Status</th>
              <th>Username</th>
              <th>Access Level</th>
              <th>Time last active</th>
              <th>Date last active</th>
            </tr>
            <?php @include('../php/tables/admin/staff_status.php'); fillStaffStatusTable() ?>
          </table>
          <footer/>
        </div>
      </section>
      <section class="main_section" id="m12">
        <h2>Edit Staff</h2>
        <div class="info_wrapper text">
          <p>Welcome to the edit staff area. In this area, you are able to add, edit and remove staff accounts to and from the system. Different access levels allow staff users to perform different actions.</p>
        </div>
        <spacer></spacer>
        <div class="table_wrapper">
          <header>
            <h2>Staff Accounts</h2>
            <div class="button_wrapper">
              <button onclick="toggleHiddenSection('staff_add_section');" class="add_button" id="add_staff_button">Add Staff</button>
            </div>
          </header>
          <table class='table has_edit' id='staff_accounts_table'>
            <tr>
              <th>ID</th>
              <th>Username</th>
              <th>Access Level</th>
              <th>Forename</th>
              <th>Surname</th>
              <th>Email</th>
              <th></th>
            </tr>
            <?php @include('../php/tables/admin/staff_accounts.php'); loadStaffAccountsTable() ?>
          </table>
          <footer/>
        </div>
        <section class="hidden_section input_area" id="staff_edit_section">
          <h3 id="staff_edit_title">Edit Staff -</h3>
          <form id="edit_staff_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="edit_staff_form" value="true"/>
            <input class="staff_id_storage" type="hidden" name="staff_id" value="0"/>
            <div class="input_wrapper">
              <label for="new_staff_username"><h4>Username:</h4></label>
              <input id="new_staff_username" name="new_staff_username" type="text" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper">
              <label for="new_staff_password"><h4>Password:</h4></label>
              <input id="new_staff_password" name="new_staff_password" type="password" maxlength="32" pattern="/^[a-zA-Z0-9!@#\$%\^\&*_=+-]{8,12}$/g"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_staff_forename"><h4>Forename:</h4></label>
              <input id="new_staff_forename" name="new_staff_forename" type="text" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_staff_surname"><h4>Surname:</h4></label>
              <input id="new_staff_surname" name="new_staff_surname" type="text" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper description">
              <label for="new_staff_email"><h4>Email:</h4></label>
              <textarea id="new_staff_email" name="new_staff_email" rows="4" cols="50" maxlength="320"></textarea>
            </div>
            <div class="radio_input_area">
              <label><h4>Access Level:</h4></label>
              <div class="radio_wrapper">
                <input type="radio" name="new_staff_access_level" value="1">
                <label>Staff</label>
                <input type="radio" name="new_staff_access_level" value="2">
                <label>Moderator</label>
                <input type="radio" name="new_staff_access_level" value="3">
                <label>Admin</label>
              </div>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Make Changes" />
            </div>
          </form>
          <form id="remove_staff_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <div class="input_wrapper">
              <label for="remove_staff"><h4>Remove Staff:</h4></label>
              <input type="hidden" name="remove_staff" value="true"/>
              <input class="staff_id_storage" type="hidden" name="staff_id" value="0"/>
              <input class="submit_button remove_button" type="submit" value="Remove" />
            </div>
          </form>
        </section>
        <section class="hidden_section input_area" id="staff_add_section">
          <h3>Add Staff</h3>
          <form id="add_staff_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="add_staff" value="true"/>
            <div class="input_wrapper">
              <label for="staff_username"><h4>Username*:</h4></label>
              <input id="staff_username" name="staff_username" placeholder="Required" type="text" maxlength="32" pattern="[a-zA-Z]+" required></input>
            </div>
            <div class="input_wrapper">
              <label for="staff_password"><h4>Password*:</h4></label>
              <input id="staff_password" name="staff_password" placeholder="Required" type="password" maxlength="32" pattern="/^[a-zA-Z0-9!@#\$%\^\&*_=+-]{8,12}$/g" required></input>
            </div>
            <div class="input_wrapper">
              <label for="staff_forename"><h4>Forename:</h4></label>
              <input id="staff_forename" name="staff_forename" type="text" placeholder="Optional" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper">
              <label for="staff_surname"><h4>Surname:</h4></label>
              <input id="staff_surname" name="staff_surname" type="text" placeholder="Optional" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper description">
              <label for="staff_email"><h4>Email:</h4></label>
              <textarea id="staff_email" name="staff_email" value="" placeholder="Optional" value="" rows="4" cols="50" maxlength="320"></textarea>
            </div>
            <div class="radio_input_area">
              <label><h4>Access Level:</h4></label>
              <div class="radio_wrapper">
                <input type="radio" checked="checked" name="staff_access_level" value="1">
                <label>Staff</label>
                <input type="radio" name="staff_access_level" value="2">
                <label>Moderator</label>
                <input type="radio" name="staff_access_level" value="3">
                <label>Admin</label>
              </div>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Add Staff" />
            </div>
          </form>
        </section>
      </section>


      <section class="main_section" id="m21">
        <h2 class="title">Edit Users</h2>
        <div class="table_wrapper">
          <header>
            <h2>Users</h2>
            <div class="button_wrapper">
              <button onclick="toggleHiddenSection('users_add_section');" class="add_button" id="add_user_button">Add User</button>
            </div>
          </header>
          <table class='table has_edit' id='user_accounts_table'>
            <tr>
              <th>ID</th>
              <th>Forename</th>
              <th>Surname</th>
              <th>Email</th>
              <th>Gender</th>
              <th>Room Number</th>
              <th>Initials</th>
              <th></th>
            </tr>
            <?php @include('../php/tables/admin/user_accounts.php'); loadUserAccountsTable() ?>
          </table>
          <footer/>
        </div>
        <section class="hidden_section input_area" id="users_edit_section">
          <h3 id="users_edit_title">Edit Users -</h3>
          <form id="edit_user_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="edit_user_form" value="true"/>
            <input class="user_id_storage" type="hidden" name="user_id" value="0"/>
            <div class="input_wrapper capitalize">
              <label for="new_user_forename"><h4>Forename:</h4></label>
              <input id="new_user_forename" name="new_user_forename" type="text" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_user_surname"><h4>Surname:</h4></label>
              <input id="new_user_surname" name="new_user_surname" type="text" maxlength="32" pattern="[a-zA-Z]+"></input>
            </div>
            <div class="input_wrapper description">
              <label for="new_user_email"><h4>Email:</h4></label>
              <textarea id="new_user_email" name="new_user_email" rows="4" cols="50" maxlength="320"></textarea>
            </div>
            <div class="input_wrapper">
              <label for="new_user_room_num"><h4>Room Number:</h4></label>
              <input id="new_user_room_num" name="new_user_room_num" type="text" maxlength="3" pattern="[0-9]+"></input>
            </div>
            <div class="radio_input_area">
              <label><h4>Gender:</h4></label>
              <div class="radio_wrapper">
                <input type="radio" name="new_user_gender" value="m">
                <label>Male</label>
                <input type="radio" name="new_user_gender" value="f">
                <label>Female</label>
                <input type="radio" name="new_user_gender" value="o">
                <label>Other</label>
              </div>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Make Changes" />
            </div>
          </form>
          <form id="remove_user_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="remove_user" value="true"/>
            <input class="user_id_storage" type="hidden" name="user_id" value="0"/>
            <div class="input_wrapper">
              <label for="remove_user"><h4>Remove User:</h4></label>
              <input class="submit_button remove_button" type="submit" value="Remove" />
            </div>
          </form>
        </section>
        <section class="hidden_section input_area" id="users_add_section">
          <h3>Add User</h3>
          <form id="add_user_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="add_user" value="true"/>
            <div class="input_wrapper capitalize">
              <label for="user_forename"><h4>Forename*:</h4></label>
              <input id="user_forename" name="user_forename" placeholder="Required" type="text" maxlength="32" pattern="[a-zA-Z]+" required></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="user_surname"><h4>Surname*:</h4></label>
              <input id="user_surname" name="user_surname" placeholder="Required" type="text" maxlength="32" pattern="[a-zA-Z]+" required></input>
            </div>
            <div class="input_wrapper description">
              <label for="user_email"><h4>Email:</h4></label>
              <textarea id="user_email" name="user_email" value="" placeholder="Optional" value="" rows="4" cols="50" maxlength="320"></textarea>
            </div>
            <div class="input_wrapper">
              <label for="user_room_num"><h4>Room Number:</h4></label>
              <input id="user_room_num" name="user_room_num" placeholder="Optional" value="" type="text" maxlength="3" pattern="[0-9]+"></input>
            </div>
            <div class="radio_input_area">
              <label><h4>Gender:</h4></label>
              <div class="radio_wrapper">
                <input type="radio" name="user_gender" value="m">
                <label>Male</label>
                <input type="radio" name="user_gender" value="f">
                <label>Female</label>
                <input type="radio" checked="checked" name="user_gender" value="o">
                <label>Other</label>
              </div>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Add User" />
            </div>
          </form>
        </section>
      </section>

      <section class="main_section" id="m31">
        <h2 class="title">Edit Locations</h2>
        <div class="table_wrapper">
          <header>
            <h2>Locations</h2>
            <div class="button_wrapper">
              <button onclick="toggleHiddenSection('locations_add_section');" class="add_button" id="add_location_button">Add Location</button>
            </div>
          </header>
          <table class='table has_edit' id='locations_table'>
            <tr>
              <th>ID</th>
              <th>Location</th>
              <th>Alias</th>
              <th>Description</th>
              <th></th>
            </tr>
            <?php @include('../php/tables/admin/locations.php'); loadLocationsTable() ?>
          </table>
          <footer/>
        </div>
        <section class="hidden_section input_area" id="locations_edit_section">
          <h3 id="locations_edit_title">Edit Location -</h3>
          <form id="edit_location_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="edit_location_form" value="true"/>
            <input class="location_id_storage" type="hidden" name="location_id" value="0"/>
            <div class="input_wrapper capitalize">
              <label for="new_location_name"><h4>Change Name:</h4></label>
              <input id="new_location_name" name="new_location_name" type="text" maxlength="20"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_location_alias"><h4>Change Alias:</h4></label>
              <input id="new_location_alias" name="new_location_alias" type="text" maxlength="20"></input>
            </div>
            <div class="input_wrapper description">
              <label for="new_location_desc"><h4>Change Description:</h4></label>
              <textarea id="new_location_desc" name="new_location_desc" rows="4" cols="50" maxlength="100"></textarea>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Make Changes" />
            </div>
          </form>
          <form id="remove_location_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="remove_location" value="true"/>
            <input class="location_id_storage" type="hidden" name="location_id" value="0"/>
            <div class="input_wrapper">
              <label for="remove_location"><h4>Remove Location:</h4></label>
              <input class="submit_button remove_button" type="submit" value="Remove" />
            </div>
          </form>
        </section>
        <section class="hidden_section input_area" id="locations_add_section">
          <h3>Add Location</h3>
          <form id="add_location_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="add_location" value="true"/>
            <div class="input_wrapper capitalize">
              <label for="location_name"><h4>Location Name*:</h4></label>
              <input id="location_name" name="location_name" placeholder="Required" type="text" maxlength="20" required></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="location_alias"><h4>Alias:</h4></label>
              <input id="location_alias" name="location_alias" placeholder="Optional" type="text" maxlength="20"></input>
            </div>
            <div class="input_wrapper description">
              <label for="location_desc"><h4>Description:</h4></label>
              <textarea id="location_desc" name="location_desc" value="" placeholder="Optional" rows="4" cols="50" maxlength="100"></textarea>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Add Location" />
            </div>
          </form>
        </section>
      </section>
      <section class="main_section" id="m32">
        <h2 class="title">Edit Events</h2>
        <div class="table_wrapper">
          <header>
            <h2>Events</h2>
            <div class="button_wrapper">
              <button onclick="toggleHiddenSection('events_add_section');" class="add_button" id="add_event_button">Add Event</button>
            </div>
          </header>
          <table class='table has_edit' id='events_table'>
            <tr>
              <th>ID</th>
              <th>Event</th>
              <th>Location</th>
              <th>Start</th>
              <th>End</th>
              <th>Deviation</th>
              <th>Days</th>
              <th>Alerts</th>
              <th>Nature</th>
              <th></th>
            </tr>
            <?php @include('../php/tables/admin/events.php'); loadEventsTable() ?>
          </table>
          <footer/>
        </div>
        <section class="hidden_section input_area" id="events_edit_section">
          <h3 id="events_edit_title">Edit event -</h3>
          <form id="edit_event_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="edit_event_form" value="true"/>
            <input class="event_id_storage" type="hidden" name="event_id" value="0"/>
            <div class="input_wrapper capitalize">
              <label for="new_event_name"><h4>Event Name:</h4></label>
              <input id="new_event_name" name="new_event_name" type="text" maxlength="20"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for"new_event_deviation"><h4>Deviation:</h4></label>
              <div class="range_wrapper">
                <input id="new_event_deviation" name="new_event_deviation" value="0" type="range" step="1" min="0" max="30" oninput="this.nextElementSibling.value = this.value+' Minutes'"></input>
                <output></output>
              </div>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_event_start_time"><h4>Start Time:</h4></label>
              <input id="new_event_start_time" name="new_event_start_time" type="time"></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="new_event_end_time"><h4>End Time:</h4></label>
              <input id="new_event_end_time" name="new_event_end_time" type="time"></input>
            </div>
            <div class="checkbox_input_area">
              <label><h4>Days:</h4></label>
              <div class="checkbox_wrapper">
                <input type="checkbox" name="mon" value="64"></input>
                <label for="mon"><h5>Monday</h5></label>
                <input type="checkbox" name="tue" value="32"></input>
                <label for="tue"><h5>Tuesday</h5></label>
                <input type="checkbox" name="wed" value="16"></input>
                <label for="wed"><h5>Wednesday</h5></label>
                <input type="checkbox" name="thu" value="8"></input>
                <label for="thu"><h5>Thursday</h5></label>
                <input type="checkbox" name="fri" value="4"></input>
                <label for="fri"><h5>Friday</h5></label>
                <input type="checkbox" name="sat" value="2"></input>
                <label for="sat"><h5>Saturday</h5></label>
                <input type="checkbox" name="sun" value="1"></input>
                <label for="sun"><h5>Sunday</h5></label>
              </div>
            </div>
            <div class="radio_input_area">
              <label><h4>Alerts:</h4></label>
              <div class="boolean_radio radio_wrapper">
                <input type="radio" name="new_event_alerts" value="1">
                <label>Yes</label>
                <input type="radio" name="new_event_alerts" value="0">
                <label>No</label>
              </div>
            </div>
            <spacer class="input_spacer"></spacer>
            <div class="radio_input_area">
              <label><h4>Event Nature:</h4></label>
              <div class="boolean_radio radio_wrapper">
                <input type="radio" name="new_event_nature" value="1" onclick="disableInput('new_event_location_toggle')">
                <label>Sign In</label>
                <input type="radio" name="new_event_nature" value="0" onclick="enableInput('new_event_location_toggle')">
                <label>Sign Out</label>
              </div>
            </div>
            <div class="input_wrapper capitalize" id="new_event_location_toggle">
              <label for="new_event_location_id"><h4>Location ID:</h4></label>
              <input id="new_event_location_id" name="new_event_location_id" type="number" min="1" max="999" required></input>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Make Changes" />
            </div>
          </form>
          <form id="remove_event_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="remove_event" value="true"/>
            <input class="event_id_storage" type="hidden" name="event_id" value="0"/>
            <div class="input_wrapper">
              <label for="remove_event"><h4>Remove Event:</h4></label>
              <input class="submit_button remove_button" type="submit" value="Remove" />
            </div>
          </form>
        </section>
        <section class="hidden_section input_area" id="events_add_section">
          <h3>Add event</h3>
          <form id="add_event_form" autocomplete="off" class="text generic_form" action="" method="POST">
            <input type="hidden" name="add_event" value="true"/>
            <div class="input_wrapper capitalize">
              <label for="event_name"><h4>Event Name*:</h4></label>
              <input id="event_name" name="event_name" placeholder="Required" type="text" maxlength="20" required></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for"event_deviation"><h4>Deviation*:</h4></label>
              <div class="range_wrapper">
                <input id="event_deviation" name="event_deviation" type="range" step="1" min="0" max="30" value="15" oninput="this.nextElementSibling.value = this.value+' Minutes'"></input>
                <output>15 Minutes</output>
              </div>
            </div>
            <div class="input_wrapper capitalize">
              <label for="event_start_time"><h4>Start Time*:</h4></label>
              <input id="event_start_time" name="event_start_time" type="time" required></input>
            </div>
            <div class="input_wrapper capitalize">
              <label for="event_end_time"><h4>End Time*:</h4></label>
              <input id="event_end_time" name="event_end_time" type="time" required></input>
            </div>
            <div class="checkbox_input_area">
              <label><h4>Days*:</h4></label>
              <div class="checkbox_wrapper">
                <input type="checkbox" name="mon" value="64" checked="checked"></input>
                <label for="mon"><h5>Monday</h5></label>
                <input type="checkbox" name="tue" value="32"></input>
                <label for="tue"><h5>Tuesday</h5></label>
                <input type="checkbox" name="wed" value="16"></input>
                <label for="wed"><h5>Wednesday</h5></label>
                <input type="checkbox" name="thu" value="8"></input>
                <label for="thu"><h5>Thursday</h5></label>
                <input type="checkbox" name="fri" value="4"></input>
                <label for="fri"><h5>Friday</h5></label>
                <input type="checkbox" name="sat" value="2"></input>
                <label for="sat"><h5>Saturday</h5></label>
                <input type="checkbox" name="sun" value="1"></input>
                <label for="sun"><h5>Sunday</h5></label>
              </div>
            </div>
            <div class="radio_input_area">
              <label><h4>Alerts:</h4></label>
              <div class="boolean_radio radio_wrapper">
                <input type="radio" name="event_alerts" value="1">
                <label>Yes</label>
                <input type="radio" name="event_alerts" value="0" checked="checked">
                <label>No</label>
              </div>
            </div>
            <spacer class="input_spacer"></spacer>
            <div class="radio_input_area">
              <label><h4>Event Nature:</h4></label>
              <div class="boolean_radio radio_wrapper">
                <input type="radio" name="event_nature" value="1" onclick="disableInput('event_location_toggle')">
                <label>Sign In</label>
                <input type="radio" name="event_nature" value="0" checked="checked" onclick="enableInput('event_location_toggle')">
                <label>Sign Out</label>
              </div>
            </div>
            <div class="input_wrapper capitalize" id="event_location_toggle">
              <label for="event_location_id"><h4>Location ID:</h4></label>
              <input id="event_location_id" name="event_location_id" type="number" min="1" max="999" required></input>
            </div>
            <div class="input_wrapper">
              <input class="submit_button" type="submit" value="Add event" />
            </div>
          </form>
        </section>
      </section>
    </div>
  </div>
</body>
